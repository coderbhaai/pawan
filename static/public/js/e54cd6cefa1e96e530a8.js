(self.webpackChunkreward=self.webpackChunkreward||[]).push([[8123],{8123:(e,t,a)=>{"use strict";var n=a(7294),l=a(3935),r=a(319),s=a.n(r),c=a(7757),o=a.n(c),m=a(8926),i=a.n(m),u=a(4575),d=a.n(u),p=a(3913),h=a.n(p),E=a(1506),f=a.n(E),g=a(2205),v=a.n(g),b=a(8585),N=a.n(b),y=a(9754),C=a.n(y),w=a(9713),S=a.n(w),P=a(3362),k=a(262),D=a(664),O=a(7217),I=a(2122),L=a(9756),A=a(5697),M=a.n(A),_=a(4184),T=a.n(_),x=a(3663),q={tag:x.iC,wrapTag:x.iC,toggle:M().func,className:M().string,cssModule:M().object,children:M().node,closeAriaLabel:M().string,charCode:M().oneOfType([M().string,M().number]),close:M().object},R=function(e){var t,a=e.className,l=e.cssModule,r=e.children,s=e.toggle,c=e.tag,o=e.wrapTag,m=e.closeAriaLabel,i=e.charCode,u=e.close,d=(0,L.Z)(e,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","charCode","close"]),p=(0,x.mx)(T()(a,"modal-header"),l);if(!u&&s){var h="number"==typeof i?String.fromCharCode(i):i;t=n.createElement("button",{type:"button",onClick:s,className:(0,x.mx)("close",l),"aria-label":m},n.createElement("span",{"aria-hidden":"true"},h))}return n.createElement(o,(0,I.Z)({},d,{className:p}),n.createElement(c,{className:(0,x.mx)("modal-title",l)},r),u||t)};R.propTypes=q,R.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close",charCode:215};const H=R;var K={tag:x.iC,className:M().string,cssModule:M().object},Z=function(e){var t=e.className,a=e.cssModule,l=e.tag,r=(0,L.Z)(e,["className","cssModule","tag"]),s=(0,x.mx)(T()(t,"modal-body"),a);return n.createElement(l,(0,I.Z)({},r,{className:s}))};Z.propTypes=K,Z.defaultProps={tag:"div"};const B=Z;var U=a(9669),F=a.n(U),V=(a(381),a(7150));var j=a(5813);const G=function(e){v()(r,e);var t,a,l=(t=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=C()(t);if(a){var l=C()(this).constructor;e=Reflect.construct(n,arguments,l)}else e=n.apply(this,arguments);return N()(this,e)});function r(e){var t;return d()(this,r),t=l.call(this,e),S()(f()(t),"callApi",i()(o().mark((function e(){var a,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/admin/adminLeaderBoard");case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.message);case 8:t.setState({data:n.data,userOptions:n.users,storeList:n.store,publisherList:n.publisher,loading:!1});case 9:case"end":return e.stop()}}),e)})))),S()(f()(t),"onChange",(function(e){t.setState(S()({},e.target.name,e.target.value))})),S()(f()(t),"handleClick",(function(e){t.setState({currentPage:Number(e.target.id)})})),S()(f()(t),"changeitemsPerPage",(function(e){t.setState({itemsPerPage:e.target.value})})),S()(f()(t),"searchSpace",(function(e){t.setState({search:e.target.value})})),S()(f()(t),"addModalOn",(function(){t.setState({addmodalIsOpen:!0})})),S()(f()(t),"setMinNum",function(){var e=i()(o().mark((function e(a){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.setMinNum(a);case 2:n=e.sent,t.setState(S()({},a.target.name,n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S()(f()(t),"userSelected",(function(e,a){var n=a.value;t.setState({userId:n})})),S()(f()(t),"resetData",(function(){t.setState({addmodalIsOpen:!1,editmodalIsOpen:!1,userId:"",reward:"",points:"",description:"",store:"",publisher:"",date:"",amount:"",rewardPayout:"",customerPayout:"",selectedId:""}),window.scrollTo(0,0)})),S()(f()(t),"addSubmit",(function(e){e.preventDefault();var a=new FormData;a.append("userId",t.state.userId),a.append("store",t.state.store),a.append("publisher",t.state.publisher),a.append("date",t.state.date),a.append("amount",t.state.amount),a.append("rewardPayout",t.state.rewardPayout),a.append("customerPayout",t.state.customerPayout),a.append("points",t.state.points),a.append("description",t.state.description),F().post("/admin/addCashback",a).catch((function(e){return j.printError(e)})).then((function(e){e.data.success&&(t.state.data.some((function(t){return t.id===e.data.data.id}))?t.setState({data:t.state.data.map((function(t){return t.id===parseInt(e.data.data.id)?t=e.data.data:t}))}):t.setState({data:[].concat(s()(t.state.data),[e.data.data])})),j.callSwal(e.data.message)})),t.resetData()})),S()(f()(t),"editModalOn",(function(e){t.setState({editmodalIsOpen:!0,selectedId:e.id})})),S()(f()(t),"updateSubmit",(function(e){e.preventDefault();var a=new FormData;a.append("id",t.state.selectedId),a.append("store",t.state.store),a.append("url",t.state.url.replace(/ /g,"-")),a.append("category",t.state.category),a.append("title",t.state.title),a.append("percent",t.state.percent),a.append("image",t.state.image),a.append("tagline",t.state.tagline),a.append("cutoff",t.state.cutoff),a.append("current_value",t.state.current_value),a.append("status",t.state.status),a.append("oldImageName",t.state.oldImageName),F().post("/admin/updateDeal",a).catch((function(e){return j.printError(e)})).then((function(e){e.data.success&&t.setState({data:t.state.data.map((function(t){return t.id===parseInt(e.data.data.id)?t=e.data.data:t}))}),j.callSwal(e.data.message)})),t.resetData()})),t.state={addmodalIsOpen:!1,editmodalIsOpen:!1,data:[],userOptions:[],storeList:[],publisherList:[],userId:"",reward:"",points:"",description:"",store:"",publisher:"",date:"",amount:"",rewardPayout:"",customerPayout:"",selectedId:"",search:"",currentPage:1,itemsPerPage:100,loading:!0},t}return h()(r,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.callApi()}},{key:"render",value:function(){for(var e=this,t=this.state,a=t.currentPage,l=t.itemsPerPage,r=a*l,s=r-l,c=this.state.data.filter((function(t){return null==e.state.search||t.name.toLowerCase().includes(e.state.search.toLowerCase())||t.email.toLowerCase().includes(e.state.search.toLowerCase())?t:void 0})).slice(s,r).map((function(t,a){return n.createElement("tr",{key:a},n.createElement("td",null,a+1),n.createElement("td",null,t.name,n.createElement("br",null),t.email," / ",t.phone),n.createElement("td",null,t.reward),n.createElement("td",null,t.redeemed),n.createElement("td",null,t.total),n.createElement("td",{className:"editIcon text-center"},n.createElement("img",{src:"/images/icons/edit.svg",alt:"Edit Icon",onClick:function(){return e.editModalOn(t)}})))})),o=[],m=1;m<=Math.ceil(this.state.data.length/l);m++)o.push(m);var i=o.map((function(t){return a==t?n.createElement("li",{key:t,id:t,onClick:e.handleClick,className:"active"}," ",t):n.createElement("li",{key:t,id:t,onClick:e.handleClick}," ",t)}));return n.createElement(n.Fragment,null,n.createElement(P.Z,null),n.createElement("div",{className:"container-fluid admin"},n.createElement("div",{className:"row"},n.createElement(D.Z,null),n.createElement("div",{className:"col-sm-10"},n.createElement("h2",{className:"heading"},"Admin ( LeaderBoard )"),n.createElement("div",{className:"btn-pag"},n.createElement("div",{className:"perPage"},n.createElement("div",null,n.createElement("label",null,"Add Cashback here"),n.createElement("button",{className:"casleyBtn",onClick:this.addModalOn},"Add Cashback")),n.createElement("div",null,n.createElement("label",null,"Items per page"),n.createElement("select",{className:"form-control",required:!0,value:l,onChange:function(t){return e.changeitemsPerPage(t)}},n.createElement("option",null,l),n.createElement("option",{value:"10"},"10"),n.createElement("option",{value:"25"},"25"),n.createElement("option",{value:"50"},"50"),n.createElement("option",{value:"100"},"100")))),n.createElement("div",{className:"search"},n.createElement("div",{className:"noFlex searchInput"},n.createElement("label",null,"Search Here"),n.createElement("input",{type:"text",placeholder:"Search here",className:"form-control",onChange:function(t){return e.searchSpace(t)}})),n.createElement("div",{className:"noFlex"},n.createElement("label",null,"Page Numbers"),n.createElement("ul",{className:"page-numbers"},i," ")))),n.createElement("table",{className:"table table-hover table-responsive"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("td",null,"Sl no."),n.createElement("td",null,"User"),n.createElement("td",null,"Cashback won"),n.createElement("td",null,"Redeemed"),n.createElement("td",null,"Total"),n.createElement("td",null,"Edit"))),n.createElement("tbody",null,this.state.loading?n.createElement("tr",{className:"loading"},n.createElement("td",{colSpan:"6",className:"text-center"},n.createElement("img",{src:"/images/icons/loading.gif"}))):c))))),n.createElement(k.Z,null),n.createElement(O.Z,{isOpen:this.state.addmodalIsOpen,className:"adminModal"},n.createElement(H,null," Add Cashback Here "),n.createElement("div",{className:"closeModal",onClick:this.resetData},"X"),n.createElement(B,null,n.createElement("form",{encType:"multipart/form-data",onSubmit:this.addSubmit},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-6 blogMeta compare label-down"},n.createElement("label",{className:"mb-0"},"Select User"),n.createElement(V.Z,{placeholder:"Select User",fluid:!0,search:!0,selection:!0,onChange:this.userSelected,options:this.state.userOptions})),n.createElement("div",{className:"col-sm-6"},n.createElement("label",null,"Cashback Points"),n.createElement("input",{type:"number",onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},min:0,className:"form-control",name:"points",value:this.state.points,onChange:this.setMinNum,placeholder:"Add Cahback Points Here",required:!0})),n.createElement("div",{className:"col-sm-6"},n.createElement("label",null,"Description"),n.createElement("input",{className:"form-control",type:"text",placeholder:"Add Desscription Here",name:"description",value:this.state.description,onChange:this.onChange})),n.createElement("div",{className:"col-sm-3"},n.createElement("label",null,"Store Name"),n.createElement("select",{type:"select",className:"form-control",required:!0,name:"store",value:this.state.store,onChange:this.onChange},n.createElement("option",{value:""},"Select Store"),this.state.storeList.map((function(e,t){return n.createElement("option",{value:e.id,key:t},e.name)})))),n.createElement("div",{className:"col-sm-3"},n.createElement("label",null,"Publisher"),n.createElement("select",{type:"select",className:"form-control",required:!0,name:"publisher",value:this.state.publisher,onChange:this.onChange},n.createElement("option",{value:""},"Select Publisher"),this.state.publisherList.map((function(e,t){return n.createElement("option",{value:e.id,key:t},e.name)})))),n.createElement("div",{className:"col-sm-3"},n.createElement("label",null,"Date"),n.createElement("input",{className:"form-control",type:"date",name:"date",required:!0,value:this.state.date,onChange:this.onChange})),n.createElement("div",{className:"col-sm-3"},n.createElement("label",null,"Amount"),n.createElement("input",{type:"number",onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},min:0,className:"form-control",name:"amount",value:this.state.amount,onChange:this.setMinNum,placeholder:"Enter Amount",required:!0})),n.createElement("div",{className:"col-sm-3"},n.createElement("label",null,"Reward Payout"),n.createElement("input",{type:"number",onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},min:0,className:"form-control",name:"rewardPayout",value:this.state.rewardPayout,onChange:this.setMinNum,placeholder:"Reward Payout",required:!0})),n.createElement("div",{className:"col-sm-3"},n.createElement("label",null,"Customer Payout"),n.createElement("input",{type:"number",onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},min:0,className:"form-control",name:"customerPayout",value:this.state.customerPayout,onChange:this.setMinNum,placeholder:"Customer Payout",required:!0}))),n.createElement("div",{className:"my-div"},n.createElement("button",{className:"casleyBtn",type:"submit"},"Submit"))))),n.createElement(O.Z,{isOpen:this.state.editmodalIsOpen,className:"adminModal"},n.createElement(H,null," Update Deal here "),n.createElement("div",{className:"closeModal",onClick:this.resetData},"X"),n.createElement(B,null,n.createElement("form",{className:"modal-form",encType:"multipart/form-data",onSubmit:this.updateSubmit},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-3"},n.createElement("label",null,"URL"),n.createElement("input",{className:"form-control",type:"text",placeholder:"URL of Page",name:"url",required:!0,value:this.state.url,onChange:this.onChange})),n.createElement("div",{className:"col-sm-3"},n.createElement("label",null,"Status"),n.createElement("select",{type:"select",className:"form-control",required:!0,name:"status",value:this.state.status,onChange:this.onChange},n.createElement("option",{value:""},"Select Status"),n.createElement("option",{value:"1"},"Active"),n.createElement("option",{value:"0"},"Close"))),n.createElement("div",{className:"col-sm-4"},n.createElement("label",null,"Title"),n.createElement("input",{className:"form-control",type:"text",placeholder:"Add Title Here",name:"title",required:!0,value:this.state.title,onChange:this.onChange})),n.createElement("div",{className:"col-sm-4"},n.createElement("label",null,"Percent"),n.createElement("input",{type:"number",onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},min:0,className:"form-control",name:"percent",value:this.state.percent,onChange:this.setMinNum,placeholder:"Add Percent Here",required:!0})),n.createElement("div",{className:"col-sm-4"},n.createElement("label",null,"Image"),n.createElement("input",{className:"form-control",type:"file",onChange:this.uploadImage}),this.state.oldImageName?n.createElement("img",{src:"/images/store/deal/"+this.state.oldImageName,className:"img-fluid tableImg"}):null),n.createElement("div",{className:"col-sm-4"},n.createElement("label",null,"Tagline"),n.createElement("input",{className:"form-control",type:"text",placeholder:"Add Tagline Here",name:"tagline",required:!0,value:this.state.tagline,onChange:this.onChange})),n.createElement("div",{className:"col-sm-4"},n.createElement("label",null,"Cut off"),n.createElement("input",{type:"number",onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},min:0,className:"form-control",name:"cutoff",value:this.state.cutoff,onChange:this.setMinNum,placeholder:"Add Cutoff Here",required:!0})),n.createElement("div",{className:"col-sm-4"},n.createElement("label",null,"Current Value"),n.createElement("input",{type:"number",onKeyDown:function(e){return"e"===e.key&&e.preventDefault()},min:0,className:"form-control",name:"current_value",value:this.state.current_value,onChange:this.setMinNum,placeholder:"Add Current Value Here",required:!0}))),n.createElement("div",{className:"my-div"},n.createElement("button",{className:"casleyBtn",type:"submit"},"Submit"))))))}}]),r}(n.Component);(0,l.render)(n.createElement(G,null),document.getElementById("root"))},3935:(e,t,a)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=a(4448)}}]);