(self.webpackChunkreward=self.webpackChunkreward||[]).push([[5205],{7228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=new Array(t);a<t;a++)l[a]=e[a];return l}},3646:(e,t,a)=>{var l=a(7228);e.exports=function(e){if(Array.isArray(e))return l(e)}},6860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},8206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},319:(e,t,a)=>{var l=a(3646),n=a(6860),s=a(379),r=a(8206);e.exports=function(e){return l(e)||n(e)||s(e)||r()}},379:(e,t,a)=>{var l=a(7228);e.exports=function(e,t){if(e){if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}}},5205:(e,t,a)=>{"use strict";var l=a(7294),n=a(3935),s=a(319),r=a.n(s),c=a(7757),o=a.n(c),i=a(8926),m=a.n(i),u=a(4575),d=a.n(u),p=a(3913),h=a.n(p),g=a(1506),E=a.n(g),f=a(2205),v=a.n(f),y=a(8585),b=a.n(y),N=a(9754),C=a.n(N),S=a(9713),x=a.n(S),k=a(3362),T=a(262),w=a(664),O=a(7217),L=a(2122),I=a(9756),A=a(5697),_=a.n(A),D=a(4184),q=a.n(D),M=a(3663),P={tag:M.iC,wrapTag:M.iC,toggle:_().func,className:_().string,cssModule:_().object,children:_().node,closeAriaLabel:_().string,charCode:_().oneOfType([_().string,_().number]),close:_().object},R=function(e){var t,a=e.className,n=e.cssModule,s=e.children,r=e.toggle,c=e.tag,o=e.wrapTag,i=e.closeAriaLabel,m=e.charCode,u=e.close,d=(0,I.Z)(e,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","charCode","close"]),p=(0,M.mx)(q()(a,"modal-header"),n);if(!u&&r){var h="number"==typeof m?String.fromCharCode(m):m;t=l.createElement("button",{type:"button",onClick:r,className:(0,M.mx)("close",n),"aria-label":i},l.createElement("span",{"aria-hidden":"true"},h))}return l.createElement(o,(0,L.Z)({},d,{className:p}),l.createElement(c,{className:(0,M.mx)("modal-title",n)},s),u||t)};R.propTypes=P,R.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close",charCode:215};const H=R;var Z={tag:M.iC,className:_().string,cssModule:_().object},j=function(e){var t=e.className,a=e.cssModule,n=e.tag,s=(0,I.Z)(e,["className","cssModule","tag"]),r=(0,M.mx)(q()(t,"modal-body"),a);return l.createElement(n,(0,L.Z)({},s,{className:r}))};j.propTypes=Z,j.defaultProps={tag:"div"};const Y=j;var B=a(9669),F=a.n(B),U=a(381),V=a.n(U),G=a(7150);var J=a(5813);const K=function(e){v()(s,e);var t,a,n=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,l=C()(t);if(a){var n=C()(this).constructor;e=Reflect.construct(l,arguments,n)}else e=l.apply(this,arguments);return b()(this,e)});function s(e){var t;return d()(this,s),t=n.call(this,e),x()(E()(t),"callApi",m()(o().mark((function e(){var a,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/admin/couponData");case 2:return a=e.sent,e.next=5,a.json();case 5:if(l=e.sent,200===a.status){e.next=8;break}throw Error(l.message);case 8:t.setState({data:l.data,storeList:l.store,publisherList:l.publisher,categoryList:l.categoryList,couponTypeList:l.couponType,loading:!1});case 9:case"end":return e.stop()}}),e)})))),x()(E()(t),"onChange",(function(e){t.setState(x()({},e.target.name,e.target.value))})),x()(E()(t),"handleClick",(function(e){t.setState({currentPage:Number(e.target.id)})})),x()(E()(t),"changeitemsPerPage",(function(e){t.setState({itemsPerPage:e.target.value})})),x()(E()(t),"searchSpace",(function(e){t.setState({search:e.target.value})})),x()(E()(t),"addModalOn",(function(){t.setState({addmodalIsOpen:!0})})),x()(E()(t),"uploadImage",(function(e){t.setState({image:e.target.files[0]})})),x()(E()(t),"resetData",(function(){t.setState({addmodalIsOpen:!1,editmodalIsOpen:!1,store:"",title:"",url:"",category:"",publisher:"",commission:"",image:null,oldImageName:null,offer:"",cashback:"",status:"",start:"",expiry:"",coupon_type:"",selectedId:"",selectedTag:[],oldSelectedtags:[]}),window.scrollTo(0,0)})),x()(E()(t),"addSubmit",(function(e){e.preventDefault();var a=new FormData;a.append("store",t.state.store),a.append("category",t.state.category),a.append("tags",JSON.stringify(t.state.selectedTag)),a.append("title",t.state.title),a.append("url",t.state.url.replace(/ /g,"-")),a.append("publisher",t.state.publisher),a.append("commission",t.state.commission),a.append("image",t.state.image),a.append("offer",t.state.offer),a.append("cashback",t.state.cashback),a.append("status",t.state.status),a.append("start",t.state.start),a.append("expiry",t.state.expiry),a.append("coupon_type",t.state.coupon_type),F().post("/admin/addCoupon",a).catch((function(e){return J.printError(e)})).then((function(e){e.data.success&&t.setState({data:[].concat(r()(t.state.data),[e.data.data])}),J.callSwal(e.data.message)})),t.resetData()})),x()(E()(t),"editModalOn",(function(e){t.setState({editmodalIsOpen:!0,selectedId:e.id,store:e.store,category:e.category,title:e.title,url:e.url,publisher:e.publisher,commission:e.commission,oldImageName:e.image,offer:e.offer,cashback:e.cashback,status:e.status,start:e.start.split("T")[0],expiry:e.expiry.split("T")[0],coupon_type:e.coupon_type});var a=[];JSON.parse(e.tags).forEach((function(e){"1"==e?a.push({text:"Recommended",value:1}):"2"==e?a.push({text:"Special Offers",value:2}):"3"==e?a.push({text:"Staff Recommended",value:3}):"4"==e&&a.push({text:"Daily Ranking",value:4})})),t.setState({tagData:a})})),x()(E()(t),"updateSubmit",(function(e){e.preventDefault();var a=[];t.state.tagData.forEach((function(e){a.push(e.value)}));var l=Array.from(new Set([].concat(a,r()(t.state.selectedTag)))),n=new FormData;n.append("id",t.state.selectedId),n.append("store",t.state.store),n.append("category",t.state.category),n.append("tags",JSON.stringify(l)),n.append("title",t.state.title),n.append("url",t.state.url.replace(/ /g,"-")),n.append("publisher",t.state.publisher),n.append("commission",t.state.commission),n.append("image",t.state.image),n.append("offer",t.state.offer),n.append("cashback",t.state.cashback),n.append("status",t.state.status),n.append("start",t.state.start),n.append("expiry",t.state.expiry),n.append("coupon_type",t.state.coupon_type),n.append("oldImageName",t.state.oldImageName),F().post("/admin/updateCoupon",n).catch((function(e){return J.printError(e)})).then((function(e){e.data.success&&t.setState({data:t.state.data.map((function(t){return t.id===parseInt(e.data.data.id)?t=e.data.data:t}))}),J.callSwal(e.data.message)})),t.resetData()})),x()(E()(t),"changeStatus",(function(e,a){if(1==a)var l=0;else l=1;var n={id:e,status:l};F().post("/admin/changeCouponStatus",n).then((function(e){e.data.success&&t.setState({data:t.state.data.map((function(t){return t.id===parseInt(e.data.data.id)?t=e.data.data:t}))}),J.callSwal(e.data.message)})).catch((function(e){return J.printError(e)}))})),x()(E()(t),"tagSelected",(function(e,a){var l=a.value;t.setState({selectedTag:l})})),t.state={addmodalIsOpen:!1,editmodalIsOpen:!1,data:[],storeList:[],categoryList:[],publisherList:[],couponTypeList:[],selectedTag:[],oldSelectedtags:[],tagData:[],store:"",category:"",title:"",url:"",publisher:"",commission:"",image:null,oldImageName:null,offer:"",cashback:"",status:"",start:"",expiry:"",coupon_type:"",selectedId:"",search:"",currentPage:1,itemsPerPage:100,loading:!0},t}return h()(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.callApi()}},{key:"arrayTagRemove",value:function(e){this.state.tagData.splice(e,1),this.setState({tagData:this.state.tagData})}},{key:"render",value:function(){for(var e=this,t=[{text:"Recommended",value:1},{text:"Special Offers",value:2},{text:"Staff Recommended",value:3},{text:"Daily Ranking",value:4}],a=this.state,n=a.currentPage,s=a.itemsPerPage,r=n*s,c=r-s,o=this.state.data.filter((function(t){return null==e.state.search||t.title.toLowerCase().includes(e.state.search.toLowerCase())||t.status.toLowerCase().includes(e.state.search.toLowerCase())?t:void 0})).slice(c,r).map((function(t,a){return l.createElement("tr",{key:a},l.createElement("td",null,a+1),l.createElement("td",null,l.createElement("a",{href:t.url},t.title)),l.createElement("td",null,l.createElement("img",{src:"/images/store/coupon/"+t.image,className:"tableImg"})),l.createElement("td",null,V().utc(t.start).format("DD MMMM  YYYY")," - ",V().utc(t.expiry).format("DD MMMM  YYYY")),l.createElement("td",null,l.createElement("div",{className:"onoffswitch"},l.createElement("input",{type:"checkbox",name:"category",className:"onoffswitch-checkbox",id:"Switch-"+t.id,onChange:function(a){return e.changeStatus(t.id,a.target.value)},value:t.status,checked:1==t.status}),l.createElement("label",{className:"onoffswitch-label",htmlFor:"Switch-"+t.id},l.createElement("span",{className:"onoffswitch-inner"}),l.createElement("span",{className:"onoffswitch-switch"})))),l.createElement("td",{className:"editIcon text-center"},l.createElement("img",{src:"/images/icons/edit.svg",alt:"Edit Icon",onClick:function(){return e.editModalOn(t)}})))})),i=[],m=1;m<=Math.ceil(this.state.data.length/s);m++)i.push(m);var u=i.map((function(t){return n==t?l.createElement("li",{key:t,id:t,onClick:e.handleClick,className:"active"}," ",t):l.createElement("li",{key:t,id:t,onClick:e.handleClick}," ",t)}));return l.createElement(l.Fragment,null,l.createElement(k.Z,null),l.createElement("div",{className:"container-fluid admin"},l.createElement("div",{className:"row"},l.createElement(w.Z,null),l.createElement("div",{className:"col-sm-10"},l.createElement("h2",{className:"heading"},"Admin ( Coupon )"),l.createElement("div",{className:"btn-pag"},l.createElement("div",{className:"perPage"},l.createElement("div",null,l.createElement("label",null,"Add Coupon here"),l.createElement("button",{className:"casleyBtn",onClick:this.addModalOn},"Add Coupon")),l.createElement("div",null,l.createElement("label",null,"Items per page"),l.createElement("select",{className:"form-control",required:!0,value:s,onChange:function(t){return e.changeitemsPerPage(t)}},l.createElement("option",null,s),l.createElement("option",{value:"10"},"10"),l.createElement("option",{value:"25"},"25"),l.createElement("option",{value:"50"},"50"),l.createElement("option",{value:"100"},"100")))),l.createElement("div",{className:"search"},l.createElement("div",{className:"noFlex searchInput"},l.createElement("label",null,"Search Here"),l.createElement("input",{type:"text",placeholder:"Search here",className:"form-control",onChange:function(t){return e.searchSpace(t)}})),l.createElement("div",{className:"noFlex"},l.createElement("label",null,"Page Numbers"),l.createElement("ul",{className:"page-numbers"},u," ")))),l.createElement("table",{className:"table table-hover table-responsive"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("td",null,"Sl no."),l.createElement("td",null,"Title"),l.createElement("td",null,"Icon"),l.createElement("td",null,"Validity"),l.createElement("td",null,"Status"),l.createElement("td",null,"Edit"))),l.createElement("tbody",null,this.state.loading?l.createElement("tr",{className:"loading"},l.createElement("td",{colSpan:"5",className:"text-center"},l.createElement("img",{src:"/images/icons/loading.gif"}))):o))))),l.createElement(T.Z,null),l.createElement(O.Z,{isOpen:this.state.addmodalIsOpen,className:"adminModal"},l.createElement(H,null," Add Coupon Here "),l.createElement("div",{className:"closeModal",onClick:this.resetData},"X"),l.createElement(Y,null,l.createElement("form",{encType:"multipart/form-data",onSubmit:this.addSubmit},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Store Name"),l.createElement("select",{type:"select",className:"form-control",required:!0,name:"store",value:this.state.store,onChange:this.onChange},l.createElement("option",{value:""},"Select Store"),this.state.storeList.map((function(e,t){return l.createElement("option",{value:e.id,key:t},e.name)})))),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Category Name"),l.createElement("select",{type:"select",className:"form-control",required:!0,name:"category",value:this.state.category,onChange:this.onChange},l.createElement("option",{value:""},"Select Category"),this.state.categoryList.map((function(e,t){return l.createElement("option",{value:e.id,key:t},e.name)})))),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Publisher Name"),l.createElement("select",{type:"select",className:"form-control",required:!0,name:"publisher",value:this.state.publisher,onChange:this.onChange},l.createElement("option",{value:""},"Select Publisher"),this.state.publisherList.map((function(e,t){return l.createElement("option",{value:e.id,key:t},e.name)})))),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"URL"),l.createElement("input",{className:"form-control",type:"text",placeholder:"URL of Page",name:"url",required:!0,value:this.state.url,onChange:this.onChange})),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Status"),l.createElement("select",{type:"select",className:"form-control",required:!0,name:"status",value:this.state.status,onChange:this.onChange},l.createElement("option",{value:""},"Select Status"),l.createElement("option",{value:"1"},"Active"),l.createElement("option",{value:"0"},"Close"))),l.createElement("div",{className:"col-sm-9"},l.createElement("label",null,"Title"),l.createElement("input",{className:"form-control",type:"text",placeholder:"Add Title Here",name:"title",required:!0,value:this.state.title,onChange:this.onChange})),l.createElement("div",{className:"col-sm-6"},l.createElement("label",null,"Commission"),l.createElement("input",{className:"form-control",type:"text",placeholder:"Add Commission Here",name:"commission",required:!0,value:this.state.commission,onChange:this.onChange})),l.createElement("div",{className:"col-sm-6"},l.createElement("label",null,"Cashback"),l.createElement("input",{className:"form-control",type:"text",placeholder:"Add Cashback Here",name:"cashback",required:!0,value:this.state.cashback,onChange:this.onChange})),l.createElement("div",{className:"col-sm-6"},l.createElement("label",null,"Offer"),l.createElement("input",{className:"form-control",type:"text",placeholder:"Add offer Here",name:"offer",required:!0,value:this.state.offer,onChange:this.onChange})),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Start"),l.createElement("input",{className:"form-control",type:"date",name:"start",required:!0,value:this.state.start,onChange:this.onChange})),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Expiry"),l.createElement("input",{className:"form-control",type:"date",name:"expiry",required:!0,value:this.state.expiry,onChange:this.onChange})),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Type of Coupon"),l.createElement("select",{type:"select",className:"form-control",required:!0,name:"coupon_type",value:this.state.coupon_type,onChange:this.onChange},l.createElement("option",{value:""},"Select Type"),this.state.couponTypeList.map((function(e,t){return l.createElement("option",{value:e.id,key:t},e.name)})))),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Image"),l.createElement("input",{className:"form-control",type:"file",onChange:this.uploadImage,required:!0})),l.createElement("div",{className:"col-sm-12 compare label-down"},l.createElement("label",null,"Add Tags"),l.createElement(G.Z,{placeholder:"Select Tags",multiple:!0,fluid:!0,search:!0,selection:!0,onChange:this.tagSelected,options:t}))),l.createElement("div",{className:"my-div"},l.createElement("button",{className:"casleyBtn",type:"submit"},"Submit"))))),l.createElement(O.Z,{isOpen:this.state.editmodalIsOpen,className:"adminModal"},l.createElement(H,null," Update Coupon here "),l.createElement("div",{className:"closeModal",onClick:this.resetData},"X"),l.createElement(Y,null,l.createElement("form",{className:"modal-form",encType:"multipart/form-data",onSubmit:this.updateSubmit},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Store Name"),l.createElement("select",{type:"select",className:"form-control",required:!0,name:"store",value:this.state.store,onChange:this.onChange},l.createElement("option",{value:""},"Select Store"),this.state.storeList.map((function(e,t){return l.createElement("option",{value:e.id,key:t},e.name)})))),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Category Name"),l.createElement("select",{type:"select",className:"form-control",required:!0,name:"category",value:this.state.category,onChange:this.onChange},l.createElement("option",{value:""},"Select Category"),this.state.categoryList.map((function(e,t){return l.createElement("option",{value:e.id,key:t},e.name)})))),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Publisher Name"),l.createElement("select",{type:"select",className:"form-control",required:!0,name:"publisher",value:this.state.publisher,onChange:this.onChange},l.createElement("option",{value:""},"Select Publisher"),this.state.publisherList.map((function(e,t){return l.createElement("option",{value:e.id,key:t},e.name)})))),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"URL"),l.createElement("input",{className:"form-control",type:"text",placeholder:"URL of Page",name:"url",required:!0,value:this.state.url,onChange:this.onChange})),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Status"),l.createElement("select",{type:"select",className:"form-control",required:!0,name:"status",value:this.state.status,onChange:this.onChange},l.createElement("option",{value:""},"Select Status"),l.createElement("option",{value:"1"},"Active"),l.createElement("option",{value:"0"},"Close"))),l.createElement("div",{className:"col-sm-9"},l.createElement("label",null,"Title"),l.createElement("input",{className:"form-control",type:"text",placeholder:"Add Title Here",name:"title",required:!0,value:this.state.title,onChange:this.onChange})),l.createElement("div",{className:"col-sm-6"},l.createElement("label",null,"Commission"),l.createElement("input",{className:"form-control",type:"text",placeholder:"Add Commission Here",name:"commission",required:!0,value:this.state.commission,onChange:this.onChange})),l.createElement("div",{className:"col-sm-6"},l.createElement("label",null,"Cashback"),l.createElement("input",{className:"form-control",type:"text",placeholder:"Add Cashback Here",name:"cashback",required:!0,value:this.state.cashback,onChange:this.onChange})),l.createElement("div",{className:"col-sm-6"},l.createElement("label",null,"Offer"),l.createElement("input",{className:"form-control",type:"text",placeholder:"Add offer Here",name:"offer",required:!0,value:this.state.offer,onChange:this.onChange})),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Start"),l.createElement("input",{className:"form-control",type:"date",name:"start",required:!0,value:this.state.start,onChange:this.onChange})),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Expiry"),l.createElement("input",{className:"form-control",type:"date",name:"expiry",required:!0,value:this.state.expiry,onChange:this.onChange})),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Type of Coupon"),l.createElement("select",{type:"select",className:"form-control",required:!0,name:"coupon_type",value:this.state.coupon_type,onChange:this.onChange},l.createElement("option",{value:""},"Select Type"),this.state.couponTypeList.map((function(e,t){return l.createElement("option",{value:e.id,key:t},e.name)})))),l.createElement("div",{className:"col-sm-3"},l.createElement("label",null,"Image"),l.createElement("input",{className:"form-control",type:"file",onChange:this.uploadImage}),this.state.oldImageName?l.createElement("img",{src:"/images/store/coupon/"+this.state.oldImageName,className:"img-fluid tableImg"}):null),l.createElement("div",{className:"col-sm-12 compare label-down"},l.createElement("label",null,"Add Tags"),this.state.tagData.length?l.createElement(l.Fragment,null,this.state.tagData.map((function(t,a){return l.createElement("span",{className:"ui label mr-3",key:a},t.text,l.createElement("i",{"aria-hidden":"true",className:"delete icon",onClick:function(){return e.arrayTagRemove(a)}}))}))):null,l.createElement(G.Z,{placeholder:"Select Tags",multiple:!0,fluid:!0,search:!0,selection:!0,onChange:this.tagSelected,options:t}))),l.createElement("div",{className:"my-div"},l.createElement("button",{className:"casleyBtn",type:"submit"},"Submit"))))))}}]),s}(l.Component);(0,n.render)(l.createElement(K,null),document.getElementById("root"))},3935:(e,t,a)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=a(4448)}}]);