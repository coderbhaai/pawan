(self.webpackChunkreward=self.webpackChunkreward||[]).push([[3429],{7228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}},3646:(e,t,a)=>{var n=a(7228);e.exports=function(e){if(Array.isArray(e))return n(e)}},6860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},8206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},319:(e,t,a)=>{var n=a(3646),r=a(6860),l=a(379),o=a(8206);e.exports=function(e){return n(e)||r(e)||l(e)||o()}},379:(e,t,a)=>{var n=a(7228);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}},3429:(e,t,a)=>{"use strict";var n=a(7294),r=a(3935),l=a(319),o=a.n(l),s=a(7757),c=a.n(s),i=a(8926),m=a.n(i),u=a(4575),d=a.n(u),g=a(3913),p=a.n(g),f=a(1506),h=a.n(f),v=a(2205),y=a.n(v),E=a(8585),b=a.n(E),C=a(9754),S=a.n(C),N=a(9713),w=a.n(N),I=a(3362),k=a(664),R=a(7150),O=a(531),x=a.n(O),A=a(9669),T=a.n(A),B=a(8908),L=a.n(B);var U=a(5813);const D=function(e){y()(l,e);var t,a,r=(t=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=S()(t);if(a){var r=S()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)});function l(e){var t;return d()(this,l),t=r.call(this,e),w()(h()(t),"ckEditorReady",(function(){t.callApi()})),w()(h()(t),"timeout",(function(e){return new Promise((function(t){return setTimeout(t,e)}))})),w()(h()(t),"callApi",m()(c().mark((function e(){var a,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.timeout(2e3);case 2:if(!t.state.loading||!t.state.id){e.next=14;break}return t.setState({loading:!1}),T().get("/admin/getBlog/"+t.state.id).then((function(e){t.setState({title:e.data.data.title,content:e.data.data.content,blogURL:e.data.data.url,oldCoverImg:e.data.data.coverImg,category:e.data.catList,tag:e.data.tagList})})),e.next=7,fetch("/admin/blogMetaOptions");case 7:return a=e.sent,e.next=10,a.json();case 10:if(n=e.sent,200===a.status){e.next=13;break}throw Error(n.message);case 13:t.setState({catOptions:n.catOptions,tagOptions:n.tagOptions});case 14:case"end":return e.stop()}}),e)})))),w()(h()(t),"onChange",(function(e){t.setState(w()({},e.target.name,e.target.value))})),w()(h()(t),"categorySelected",(function(e,a){var n=a.value;t.setState({selectedCategory:n})})),w()(h()(t),"tagSelected",(function(e,a){var n=a.value;t.setState({selectedTag:n})})),w()(h()(t),"blogImage",(function(e){t.setState({blogImage:e.target.files[0],previewImg:URL.createObjectURL(e.target.files[0])})})),w()(h()(t),"updateBlogData",(function(e){e.preventDefault();var a=[];t.state.category.forEach((function(e){a.push(e.id)}));var n=[];t.state.tag.forEach((function(e){n.push(e.id)}));var r=Array.from(new Set([].concat(a,o()(t.state.selectedCategory)))),l=Array.from(new Set([].concat(n,o()(t.state.selectedTag)))),s=new FormData;s.append("id",t.state.id),s.append("file",t.state.blogImage),s.append("oldCoverImg",t.state.oldCoverImg),s.append("title",t.state.title),s.append("url",t.state.blogURL.replace(/ /g,"-")),s.append("content",t.state.content),s.append("category",JSON.stringify(r)),s.append("tag",JSON.stringify(l)),T().post("/admin/updateBlog",s).catch((function(e){return U.printError(e)})).then((function(e){e.data.success&&(localStorage.setItem("message",e.data.message),L().location.href="/admin/blogs"),U.callSwal(e.data.message)}))})),t.state={id:"",title:"",blogURL:"",content:"",catOptions:[],tagOptions:[],selectedCategory:[],selectedTag:[],oldCoverImg:"",blogImage:null,previewImg:null,category:[],tag:[],loading:!0},t.handleChange1=t.handleChange1.bind(h()(t)),t.onEditorChange1=t.onEditorChange1.bind(h()(t)),t}return p()(l,[{key:"componentDidMount",value:function(){L().scrollTo(0,0);var e=L().location.href.split("/").pop();this.setState({id:e})}},{key:"onEditorChange1",value:function(e){this.setState({content:e.editor.getData()})}},{key:"handleChange1",value:function(e){this.setState({content:e.target.value})}},{key:"arrayCategoryRemove",value:function(e){this.state.category.splice(e,1),this.setState({category:this.state.category})}},{key:"arrayTagRemove",value:function(e){this.state.tag.splice(e,1),this.setState({tag:this.state.tag})}},{key:"render",value:function(){var e=this;return n.createElement(n.Fragment,null,n.createElement(I.Z,null),n.createElement("div",{className:"container-fluid admin"},n.createElement("div",{className:"row admin"},n.createElement(k.Z,null),n.createElement("div",{className:"col-sm-10"},n.createElement("h1",{className:"heading"},n.createElement("span",null,"Admin Panel"),"(Update Blog)"),n.createElement("form",{encType:"multipart/form-data",onSubmit:this.updateBlogData},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-sm-4"},n.createElement("label",null,"Title"),n.createElement("input",{className:"form-control",type:"text",placeholder:"Blog Title",name:"title",required:!0,value:this.state.title,onChange:this.onChange})),n.createElement("div",{className:"col-sm-4"},n.createElement("label",null,"Blog URL"),n.createElement("input",{className:"form-control",value:this.state.blogURL,readOnly:!0})),n.createElement("div",{className:"col-sm-4"},n.createElement("label",null,"Featured Image"),this.state.previewImg?n.createElement("img",{src:this.state.previewImg,alt:"",className:"img-fluid tableImg"}):null,n.createElement("input",{className:"form-control",type:"file",onChange:this.blogImage}),n.createElement("img",{src:"/images/blog/"+this.state.oldCoverImg,alt:"",className:"img-fluid tableImg"})),n.createElement("div",{className:"col-sm-12"},n.createElement("label",null,"Blog Content"),n.createElement(x(),{onInstanceReady:this.ckEditorReady(),onBeforeLoad:function(e){return e.disableAutoInline=!0},data:this.state.content,content:this.state.content,onChange:this.onEditorChange1})),n.createElement("div",{className:"col-sm-6 blogMeta compare label-down"},n.createElement("label",{className:"mb-0"},"Categories"),n.createElement("div",{className:"update-treat"},this.state.category.length?n.createElement(n.Fragment,null,this.state.category.map((function(t,a){return n.createElement("span",{className:"ui label mr-3",key:a},t.name,n.createElement("i",{"aria-hidden":"true",className:"delete icon",onClick:function(){return e.arrayCategoryRemove(a)}}))}))):null),n.createElement(R.Z,{placeholder:"Select category",multiple:!0,fluid:!0,search:!0,selection:!0,onChange:this.categorySelected,options:this.state.catOptions})),n.createElement("div",{className:"col-sm-6 blogMeta compare label-down"},n.createElement("label",{className:"mb-0"},"Tags"),n.createElement("div",{className:"update-treat"},this.state.tag.length?n.createElement(n.Fragment,null,this.state.tag.map((function(t,a){return n.createElement("span",{className:"ui label mr-3",key:a},t.name,n.createElement("i",{"aria-hidden":"true",className:"delete icon",onClick:function(){return e.arrayTagRemove(a)}}))}))):null),n.createElement(R.Z,{placeholder:"Select Tags",multiple:!0,fluid:!0,search:!0,selection:!0,onChange:this.tagSelected,options:this.state.tagOptions}))),n.createElement("div",{className:"my-div"},n.createElement("button",{className:"casleyBtn",type:"submit"},"Submit",n.createElement("span",null))))))))}}]),l}(n.Component);(0,r.render)(n.createElement(D,null),document.getElementById("root"))},8908:(e,t,a)=>{var n;n="undefined"!=typeof window?window:void 0!==a.g?a.g:"undefined"!=typeof self?self:{},e.exports=n}}]);